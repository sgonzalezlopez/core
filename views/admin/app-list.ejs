<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.1/dist/bootstrap-table.min.css">
<div class="card">
    <div class="card-body">
        <h5 class="card-title">Basic Datatable</h5>
        <div class="table-responsive">
            <table id="table" 
                data-toggle="table" 
                data-url="/api/app" 
                class="table table-striped table-bordered clickable"
                detail-url="./app/"
            >
            <thead>
                <tr>
                    <th data-field="name"><%= __('COL_appname') %></th>
                    <th data-field="type"><%= __('COL_apptype') %></th>
                    <th data-field="roles"><%= __('COL_Roles') %></th>
                    <th data-field="level"><%= __('COL_applevel') %></th>
                    <th data-field="link"><%= __('COL_applink') %></th>
                    <th data-field="icon"><%= __('COL_appicon') %></th>
                    <th data-field="id" data-formatter="actionFormatter" data-events="actionEvents"><%= __('COL_actions') %></th>
                </tr>
            </thead>
        </table>
    </div>
</div>
</div>
</div>

<script src="https://unpkg.com/bootstrap-table@1.21.1/dist/bootstrap-table.min.js"></script>
<script>
function actionFormatter(value, row, index) {
  return [
    '<a class="view" href="/admin/app/' + row._id + '" title="">',
    '<i class="fa fa-eye"></i>',
    '</a> ',
    '<a class="edit" href="javascript:void(0)" title="">',
      '<i class="fa fa-pen-alt"></i>',
      '</a> ',
      '<a class="delete" href="javascript:void(0)" title="">',
        '<i class="fa fa-trash"></i>',
        '</a> ',        
  ].join('');
}

window.actionEvents = {    
  'click .edit' : function (e, value, row, index) {
    e.stopPropagation()
    //loadTournament(row._id);
  },
  'click .delete' : function (e, value, row, index) {
    e.stopPropagation()
    $.ajax({
            type: 'DELETE',
            url: `/api/app/${row._id}`,
            dataType: 'json',
            success: function(data) {
                toastr.success("<%= __('APP_NAME') %>", "<%= __('DELETE_SUCCESS') %>")
                $('#table').bootstrapTable('refresh')
            },
            error: function(error) {
                console.log('error');
                console.error(error);
            },
        });
  },
}



</script>